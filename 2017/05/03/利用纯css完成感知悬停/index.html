<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 利用纯css完成感知悬停 · Lin's Blog</title><meta name="description" content="利用纯css完成感知悬停 - Linbin"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.lbinin.com/atom.xml" title="Lin's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/lbinin" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">利用纯css完成感知悬停</h1><div class="post-info">May 3, 2017</div><div class="post-content"><p>今天看见了一个利用纯css制作的感知悬停，<a href="http://www.jq22.com/code/20170307233848.html" target="_blank" rel="external">示例页面</a> 做出了和百度图片一样的悬停效果，而且跟吸引我的是用的是纯css，虽然我不知道百度图片用的是什么方法，但是对于一个 <strong><code>能用css就别用js</code></strong>主义者的我当然是引起了极大的兴趣~</p>
<p><img src="/2017/05/03/利用纯css完成感知悬停/temple.gif" alt="演示动画"></p>
<center><small>效果图</small></center>

<p>话不多说先看看页面的源码去分析一下~</p>
<a id="more"></a>
<hr>
<h2 id="HTML结构"><a href="#HTML结构" class="headerlink" title="HTML结构"></a>HTML结构</h2><p>在看css之前先和大家说说这个页面的HTML结构吧</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"photo-container"</span> <span class="attr">style</span>=<span class="string">"background-image:url(https://source.unsplash.com/600x250/?sig=241)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Image 241 <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slide"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Quam molestiae ipsa sapiente mollitia, nobis.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"photo-container"</span> <span class="attr">style</span>=<span class="string">"background-image:url(https://source.unsplash.com/600x250/?sig=203)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Image 203 <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slide"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Autem possimus perspiciatis, eaque quos repudiandae modi labore sed repellat dolorum magnam praesentium expedita esse tempore saepe nulla.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"photo-container"</span> <span class="attr">style</span>=<span class="string">"background-image:url(https://source.unsplash.com/600x250/?sig=17)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Image 17 <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slide"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>一个 <code>row</code> 代表了一行，该行下面的每一块图片区域都是一个 <code>col</code> ，每个 <code>col</code> 下有图片的div容器 <code>photo-container</code> 以及hover后的提示块 <code>slide</code> ，以此累加 <code>col</code> ，这些元素的样式我们就不需要去分析他们了看我们项目的需求而定，我们要解开的是 <code>slide</code> 的面纱。</p>
<hr>
<h2 id="CSS部分"><a href="#CSS部分" class="headerlink" title="CSS部分"></a>CSS部分</h2><p>既然说的是利用的纯css实现的效果那我们现在就去看看它的css部分</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* The magic */</span></div><div class="line"><span class="selector-class">.col</span> &#123;</div><div class="line">  <span class="attribute">overflow</span>: hidden;</div><div class="line">  <span class="attribute">position</span>: relative;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.slide</span> &#123;</div><div class="line">  <span class="attribute">position</span>: absolute;</div><div class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</div><div class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">  <span class="comment">/* </span></div><div class="line">    Visibility delay gives the previously hovered element time to slide out before disappearing.</div><div class="line">    Remove the `visibility` transition to slide in current element without sliding out previous element</div><div class="line">  */</div><div class="line">  <span class="attribute">-webkit-transition</span>: all <span class="number">0.275s</span> ease-in-out, visibility <span class="number">0s</span> <span class="number">0.275s</span>;</div><div class="line">  <span class="attribute">transition</span>: all <span class="number">0.275s</span> ease-in-out, visibility <span class="number">0s</span> <span class="number">0.275s</span>;</div><div class="line">  <span class="attribute">visibility</span>: hidden;</div><div class="line">  <span class="attribute">will-change</span>: transform;</div><div class="line">  <span class="attribute">-webkit-transform</span>: <span class="built_in">translateY</span>(100%);</div><div class="line">          <span class="attribute">transform</span>: <span class="built_in">translateY</span>(100%);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.row</span><span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.row</span> <span class="selector-class">.slide</span> &#123;</div><div class="line">  <span class="attribute">-webkit-transform</span>: <span class="built_in">translateY</span>(-100%);</div><div class="line">          <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-100%);</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.row</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.slide</span> &#123;</div><div class="line">  <span class="attribute">-webkit-transform</span>: <span class="built_in">translateX</span>(100%);</div><div class="line">          <span class="attribute">transform</span>: <span class="built_in">translateX</span>(100%);</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.row</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.col</span><span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.col</span> <span class="selector-class">.slide</span> &#123;</div><div class="line">  <span class="attribute">-webkit-transform</span>: <span class="built_in">translateX</span>(-100%);</div><div class="line">          <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-100%);</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.row</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.col</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.slide</span> &#123;</div><div class="line">  <span class="attribute">-webkit-transform</span>: none;</div><div class="line">          <span class="attribute">transform</span>: none;</div><div class="line">  <span class="attribute">visibility</span>: visible;</div><div class="line">  <span class="attribute">-webkit-transition-delay</span>: <span class="number">0s</span>;</div><div class="line">          <span class="attribute">transition-delay</span>: <span class="number">0s</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>可以说作者真的是非常的贴心还写上了注释方便大家看懂这些代码</p>
<p>以一段 <code>The magic</code> 开头告诉我们作者要开始施展膜法了</p>
<p>这里详细介绍一些css内容希望如果有大神看到勿喷，只是希望自己记的详细一点。</p>
<p>首先这个 <code>col</code> 的区域要 <code>overflow: hidden;</code> 掉，来隐藏提示区域， <code>position: relative;</code> 不用说，就是给 <code>slide</code> 提供坐标参考。</p>
<p><code>slide</code> 的上右下左四个方向的坐标为0，指的是当 <code>position: absolute;</code> 的时候规定这个容器的四条边到父容器四条边的距离，加上不设置高度宽度，这个容器就被定义的高度和宽度，相当于设置了 <code>width: 100%; height: 100%;</code></p>
<p>接下来作者说了</p>
<blockquote>
<p>Visibility delay gives the previously hovered element time to slide out before disappearing.</p>
<p>给上一个hover的元素的 <code>visibility</code> 属性延时隐藏（既0.275s后隐藏，和其他动画的transition-duration一样），让它在消失前有滑出的动效。</p>
<p>Remove the <code>visibility</code> transition to slide in current element without sliding out previous element</p>
<p>在前一个元素的提示区域滑出，且当前元素被hover时去除其 <code>visibility</code> 的延时（既让它立即显示）。让用户看得到滑入动画效果。</p>
</blockquote>
<p>就是这个 <code>visibility</code> 的 <code>transition-delay</code> 让我们能够看到滑入和滑出的动效</p>
<p>接下来的 <code>will-change</code> 的作用是提高页面动画渲染效率，详见 <a href="/">关于will-change的用法以及一些web动画渲染优化</a> 。</p>
<p>最后的 <code>transform: translateY(100%);</code> 是 <code>slide</code> 的默认位置，既 <code>col</code> 的下方。</p>
<p>接下来的语句就是控制 <strong>提示区域位置</strong> 的规则啦</p>
<hr>
<h3 id="第一条规则"><a href="#第一条规则" class="headerlink" title="第一条规则"></a>第一条规则</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.row</span><span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.row</span> <span class="selector-class">.slide</span> &#123;</div><div class="line">  <span class="attribute">-webkit-transform</span>: <span class="built_in">translateY</span>(-100%);</div><div class="line">          <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-100%);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="语法解读："><a href="#语法解读：" class="headerlink" title="语法解读："></a>语法解读：</h4><p>当 <code>row</code> 被hover后，在当前 <code>row</code> 后的所有 <code>row</code> 下的所有提示区域 <code>slide</code> 都在父元素 <code>col</code> 的上方。</p>
<h4 id="语意解读："><a href="#语意解读：" class="headerlink" title="语意解读："></a>语意解读：</h4><p>第 <strong>X</strong> 行被 hover 后，后面的第 <strong>X+1</strong>，<strong>X+2</strong>，<strong>X+3</strong>，…，<strong>X+n</strong> 行下的所有<strong>提示区域</strong>都移动到<strong>内容区域</strong>的上方，这样，在鼠标往下移动的时候下一行的提示区域就可以从上方移动至中央出现。</p>
<hr>
<h3 id="第二条规则"><a href="#第二条规则" class="headerlink" title="第二条规则"></a>第二条规则</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.row</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.slide</span> &#123;</div><div class="line">  <span class="attribute">-webkit-transform</span>: <span class="built_in">translateX</span>(100%);</div><div class="line">          <span class="attribute">transform</span>: <span class="built_in">translateX</span>(100%);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="语法解读：-1"><a href="#语法解读：-1" class="headerlink" title="语法解读："></a>语法解读：</h4><p>当 <code>row</code> 被hover后，在当前 <code>row</code> 下的所有提示区域 <code>slide</code> 都在父元素 <code>col</code> 的右侧。</p>
<h4 id="语意解读：-1"><a href="#语意解读：-1" class="headerlink" title="语意解读："></a>语意解读：</h4><p>既第 <strong>X</strong> 行被 hover 后，这一行下的所有<strong>提示区域</strong>都移动到<strong>内容区域</strong>的右侧，为了鼠标从右侧移入内容区域的时候提示区域可以从内容区域的右侧移至中央出现。因为css只能选择某一元素之后的元素，不能选择该元素之前的元素，所以用了比第三条规则优先级更小的选择语句来设置被 hover 的 <code>col</code> <strong>之前</strong>的 <code>col</code> 下的提示区域 <code>slide</code> 的位置（既第三条规则选择不到的元素）</p>
<hr>
<h3 id="第三条规则"><a href="#第三条规则" class="headerlink" title="第三条规则"></a>第三条规则</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.row</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.col</span><span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.col</span> <span class="selector-class">.slide</span> &#123;</div><div class="line">  <span class="attribute">-webkit-transform</span>: <span class="built_in">translateX</span>(-100%);</div><div class="line">          <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-100%);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="语法解读：-2"><a href="#语法解读：-2" class="headerlink" title="语法解读："></a>语法解读：</h4><p>当 <code>row</code> 被 hover 后，并且 <code>col</code> 被 hover 的条件下，在当前 <code>col</code> 之后的所有 <code>col</code> 的提示区域 <code>slide</code> 都在父元素 <code>col</code> 的左边。</p>
<h4 id="语意解读：-2"><a href="#语意解读：-2" class="headerlink" title="语意解读："></a>语意解读：</h4><p>因为这条优先级大于之前的第二条规则语句的优先级，故当某一个 <code>col</code> 被 hover 后，其<strong>之后</strong>的所有 <code>col</code> 都下的提示区域 <code>slide</code> 都会位于内容区域的左侧，以用来当鼠标从左侧移入内容区域的时候提示区域可以从内容区域的左侧移至中央出现</p>
<hr>
<h3 id="第四条规则"><a href="#第四条规则" class="headerlink" title="第四条规则"></a>第四条规则</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.row</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.col</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.slide</span> &#123;</div><div class="line">  <span class="attribute">-webkit-transform</span>: none;</div><div class="line">          <span class="attribute">transform</span>: none;</div><div class="line">  <span class="attribute">visibility</span>: visible;</div><div class="line">  <span class="attribute">-webkit-transition-delay</span>: <span class="number">0s</span>;</div><div class="line">          <span class="attribute">transition-delay</span>: <span class="number">0s</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="解读："><a href="#解读：" class="headerlink" title="解读："></a>解读：</h4><p>当 <code>row</code> 被 hover 后，并且 <code>col</code> 被 hover 的条件下，当前的 <code>col</code> 回归原始位置，并且 <code>transition-delay:</code> 设置为0s用来立即显示元素。</p>
<hr>
<p>之后的CSS就是用来设置 <code>row</code> <code>col</code> <code>slide</code> 等元素的样式了，也就不详细解析了。</p>
<hr>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>主要利用了CSS伪元素 <code>:hover</code> 以及 <code>~</code> 选择器，根据 hover 的元素来进行提示区域 <code>slide</code> 位置的设置，个人认为比较核心的点除了位置控制，还有那一段 <code>visibility</code> 延时隐藏的语句，那是动画能否显示的核心，加上学习了 <code>will-change</code> 属性，收获颇多，希望能够用到自己的实践中去~</p>
<p>记录于2017-05-03 15:18</p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/05/03/will-change的用法以及一些web动画渲染优化/" class="prev">上一篇</a><a href="/2017/05/02/论不同动画衔接之间的小技巧/" class="next">下一篇</a><a href="javascript: history.go(-1);" class="next">返回</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://www.lbinin.com">Linbin</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>